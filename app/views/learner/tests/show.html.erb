<div class="container">
	<div class="row mt-3 col-md-8 mx-auto">
		<h3><%= @test.name %></h3>
		<table class="table table-bordered table-hover align-middle mt-3">
			<thead class="table-light">
				<tr>
					<th>
						科目名
					</th>
					<th>
						得点
					</th>
					<th>
						満点
					</th>
					<th>
						得点率
					</th>
					<th>
						平均点
					</th>
				</tr>
			</thead>
			<% @subjects.each do |s| %>
				<tbody>
					<tr>
						<td>
							<%= s.name %>
						</td>
						<td>
							<%= s.score %> 点
						</td>
						<td>
							<%= s.perfect %> 点
						</td>
						<td>
							<%= (s.score.to_f / s.perfect.to_f) * 100 %> %
						</td>
						<td>
							<%= s.average %> 点
						</td>
					</tr>
				</tbody>
			<% end %>
		</table>

		<canvas id="myChart">
		</canvas>
		<script>
			var ctx = document.getElementById("myChart");
			var myChart = new Chart(ctx, {
				type: 'radar',	 //グラフのタイプ
					data: {
						labels: gon.name_list,	// グラフのラベル
						datasets:
						[
							{
							label: "得点",
							backgroundColor: "rgba(255, 5, 9, 0.2)",
							borderColor: "rgb(255, 5, 9)",
							pointBackgroundColor: "rgb(255, 5, 9)",
							hitRadius: 7,
							borderWidth: 2,
							data: gon.score_list
							},
							{
							label: "満点",
							backgroundColor: "rgba(0, 0, 0, 0)",
							borderColor: "rgba(0, 0, 0, 0)",
							data: gon.perfect_list
							},
							{
							label: "平均点",
							backgroundColor: "rgba(80, 255, 5, 0.2)",
							borderColor: "rgb(29, 224, 0)",
							pointBackgroundColor: "rgb(29, 224, 0)",
							hitRadius: 7,
							borderWidth: 2,
							data: gon.average_list
							}
						]
					},
				options: {
					tooltips: {
						enabled: false
						// mode: 'index'
					},
					scale: {
						display: true,
						ticks: {
							beginAtZero: true,
							min: 0,
							fontColor: "lightgrey"
						}
					}
				}
			});
		</script>

		<div class="mt-3">
			<h5>良かったところ</h5>
			<li>
				<ul>
					<%= @test.pros %>
				</ul>
			</li>
		</div>
		<div class="mt-3">
			<h5>改善したいところ</h5>
			<li>
				<ul>
					<%= @test.cons %>
				</ul>
			</li>
		</div>

		<div class="mt-3">
			<%= link_to "編集する", edit_learner_test_path(@test), class: "btn btn-success" %>
			<%= link_to "削除する", learner_test_path(@test), method: :delete, data: {confirm: "削除しますか？"}, class: "btn btn-danger" %>
			<div class="mb-3 d-flex justify-content-end">
				<%= link_to "トップページへ", learner_mypage_path(@learner), class: "fa fa-reply-all" %>
			</div>
		</div>

	</div>
</div>