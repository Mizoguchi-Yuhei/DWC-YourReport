<div class="container">
	<div class="row mt-3 col-md-8 mx-auto">
		<h4><%= @test.name %></h4>
		<table class="table table-bordered table-hover align-middle mt-3">
			<thead class="table-light">
				<tr>
					<th>
						科目名
					</th>
					<th>
						得点
					</th>
					<th>
						満点
					</th>
					<th>
						得点率
					</th>
					<th>
						平均点
					</th>
				</tr>
			</thead>
			<% @subjects.each do |s| %>
				<tbody>
					<tr>
						<td>
							<%= s.name %>
						</td>
						<td>
							<%= s.score %> 点
						</td>
						<td>
							<%= s.perfect %> 点
						</td>
						<td>
							<%= (s.score.to_f / s.perfect.to_f) * 100 %> %
						</td>
						<td>
							<%= s.average %> 点
						</td>
					</tr>
				</tbody>
			<% end %>
		</table>

		<canvas id="myChart">
		</canvas>
		<script>
			var ctx = document.getElementById("myChart");
			var myChart = new Chart(ctx, {
				type: 'radar',	 //グラフのタイプ
				<% @subjects.each do |subject| %>
					data: {
						labels: ["<%= subject.name %>"],	// グラフのラベル
						datasets:
						[
							{
							label: "得点",
							backgroundColor: "rgba(249, 0, 4, 0.55)",
							borderColor: "rgba(255, 30, 34, 0.7)",
							data: [<%= subject.score %>]
							},
							{
							label: "満点",
							backgroundColor: "rgba(85, 89, 159, 0.2)",
							borderColor: "rgba(85, 89, 159, 0.4)",
							data: [<%= subject.perfect %>]
							},
							{
							label: "平均点",
							backgroundColor: 'rgba(0, 224, 52, 0.5)',
							borderColor: 'rgba(0, 224, 52, 0.7)',
							data: [<%= subject.average %>]
							}
						]
					},
				<% end %>
				options: {
					scale: {
						ticks: {
							suggestedMin: 0,
							fontColor: "lightgrey"
						}
					}
				}
			});
		</script>
		<div class="mt-3">
			<h5>良かったところ</h5>
			<li>
				<ul>
					<%= @test.pros %>
				</ul>
			</li>
		</div>
		<div class="mt-3 mb-5">
			<h5>改善したいところ</h5>
			<li>
				<ul>
					<%= @test.cons %>
				</ul>
			</li>
		</div>
	</div>
</div>